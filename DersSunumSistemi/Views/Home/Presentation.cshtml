@model DersSunumSistemi.Models.Presentation

@{
    ViewData["Title"] = Model.Title;
}

<div class="container">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-action="Index">Ana Sayfa</a></li>
            <li class="breadcrumb-item"><a asp-action="Course" asp-route-id="@Model.CourseId">@Model.Course?.Name</a></li>
            <li class="breadcrumb-item active">@Model.Title</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <div>
                            <h2>@Model.Title</h2>
                            @if (Model.Week.HasValue)
                            {
                                <p class="text-muted mb-0">Hafta @Model.Week</p>
                            }
                        </div>
                        <span class="badge bg-primary">@Model.Type</span>
                    </div>

                    @if (!string.IsNullOrEmpty(Model.Description))
                    {
                        <p class="lead">@Model.Description</p>
                    }

                    <hr>

                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <p class="mb-0">
                                <i class="bi bi-file-earmark me-2"></i>
                                <strong>Dosya:</strong> @Model.FileName
                            </p>
                            <p class="mb-0 text-muted small">
                                <i class="bi bi-hdd me-2"></i>
                                Boyut: @((Model.FileSize / 1024.0 / 1024.0).ToString("F2")) MB
                            </p>
                        </div>
                        <a asp-action="Download" asp-route-id="@Model.Id" class="btn btn-primary">
                            <i class="bi bi-download me-2"></i>İndir
                        </a>
                    </div>

                    <!-- Preview for PDF -->
                    @if (Model.FileType?.ToLower() == "pdf")
                    {
                        <div class="mt-4">
                            <h5>Önizleme</h5>
                            <div class="ratio ratio-16x9">
                                <iframe src="@Model.FilePath" type="application/pdf"></iframe>
                            </div>
                        </div>
                    }

                    <!-- Preview for Images -->
                    @if (Model.FileType?.ToLower() is "jpg" or "jpeg" or "png" or "gif")
                    {
                        <div class="mt-4">
                            <h5>Önizleme</h5>
                            <img src="@Model.FilePath" alt="@Model.Title" class="img-fluid rounded">
                        </div>
                    }
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <!-- Course Info -->
            @if (Model.Course != null)
            {
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title mb-3">Ders</h5>
                        <h6>@Model.Course.Name</h6>
                        <p class="text-muted small mb-2">@Model.Course.Code</p>
                        <span class="badge bg-info text-dark">@Model.Course.Category?.Name</span>
                        <hr>
                        <a asp-action="Course" asp-route-id="@Model.CourseId" class="btn btn-outline-primary btn-sm w-100">
                            Dersin Sayfasına Git
                        </a>
                    </div>
                </div>
            }

            <!-- Stats -->
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title mb-3">İstatistikler</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="bi bi-eye me-2"></i>
                            <strong>Görüntülenme:</strong> @Model.ViewCount
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-download me-2"></i>
                            <strong>İndirme:</strong> @Model.DownloadCount
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-calendar me-2"></i>
                            <strong>Yüklenme Tarihi:</strong> @Model.UploadDate.ToString("dd.MM.yyyy")
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
